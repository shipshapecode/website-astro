---
import { Img } from 'astro-imagetools/components';
import AuthorRow from './AuthorRow.astro';
import BottomLinks from './BottomLinks.astro';

export interface Props {
  canonicalURL: URL;
  post: any;
}
const { canonicalURL, post } = Astro.props;
const { Content } = post;
const { author } = post.frontmatter;
---

<article itemscope itemtype="http://schema.org/BlogPosting">
  <link itemprop="mainEntityOfPage" href={canonicalURL} />
  <link itemprop="publisher" href="shipshapeorg" />
  <link itemprop="image" href="shipshapelogo" />

  <div class="section flex flex-wrap justify-center">
    <div class="max-w-4xl w-full">
      <h1 class="font-bold mb-8 text-5xl" itemprop="headline">
        {post.frontmatter.title}
      </h1>

      <AuthorRow
        categories={post.frontmatter.categories}
        date={post.frontmatter.date}
        id={author.id}
        image={author.image}
        name={author.name}
      />

      {
        post.frontmatter.image && (
          <Img
            alt=""
            attributes={{
              img: {
                class: 'mb-24 mt-6 rounded-md'
              }
            }}
            itemprop="image"
            format="webp"
            placeholder="none"
            src={`/img/blog/hero-images/${post.frontmatter.image}`}
          />
        )
      }

      <div class="post-content prose prose-headings:text-navy lg:prose-lg max-w-none">
        <Content />
      </div>

      <BottomLinks
        nextLink="`/blog/${post.nextSlug}/`"
        nextLinkText={post.nextTitle}
        previousLink="`/blog/${post.previousSlug}/`"
        previousLinkText={post.previousTitle}
      />
    </div>
  </div>
</article>

<style lang="scss" is:global>
  .astro-code {
    @apply p-4;
  }
</style>
