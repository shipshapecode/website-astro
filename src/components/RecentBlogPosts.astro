---
import { Icon } from 'astro-icon';
import { formatDate } from '../utils/date';

import { Post } from './BlogPost.astro';

export interface Props {
  posts: Post[];
}

const { posts } = Astro.props;
---

<div
  class="waves blue-waves section bg-blue-light flex flex-wrap justify-center"
>
  <div class="section-content">
    <div class="flex flex-wrap justify-center">
      <div class="flex flex-wrap items-center justify-between mb-16 w-full">
        <h3 class="text-4xl text-navy">Ahoy - advice and insights ahead!</h3>

        <a href="/blog/" class="btn btn-red mt-4 w-full lg:mt-0 lg:w-auto">
          See more insights
        </a>
      </div>

      <div
        class="grid grid-cols-1 gap-1 justify-center mb-4 w-full lg:grid-cols-3"
      >
        {
          posts.map((post) => (
            <div class="bg-white flex flex-col px-8 py-16 rounded">
              <div class="flex mb-4">
                <Icon class="h-auto mr-4 w-10" name="fish" />
                {formatDate(post.frontmatter.date)}
              </div>

              <a
                class="
                block
                font-bold
                flex-grow
                leading-8
                min-h-24
                my-2
                !text-navy text-2xl
                hover:!text-red focus:!text-red
              "
                href={`/blog/${post.frontmatter.slug}/`}
              >
                {post.frontmatter.title}
              </a>

              <div class="attribution bottom-0 mb-4">
                By {post.frontmatter.author.name}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</div>
